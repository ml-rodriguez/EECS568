How to install OpenCV on Ubuntu 11.04

Reference: http://opencv.willowgarage.com/wiki/InstallGuide

1) sudo apt-get update
2) sudo apt-get install cmake libgtk2.0-dev ffmpeg libdc1394-22 libgstreamer0.10-dev libxine-dev libgstreamer0.10-dev libv4l-dev libxine-dev libavformat-dev libswscale-dev
3) Download the tar.bz2 from http://sourceforge.net/projects/opencvlibrary/files/opencv-unix/2.3.1/
4) Extract it somewhere; open the terminal there
5) mkdir build && cd build
6) cmake ..
7) make -j<number of cores you have>
8) sudo make install
9) Edit your ~/.bashrc and add:
    PKG_CONFIG_PATH=/usr/local/lib/pkgconfig/:${PKG_CONFIG_PATH}
    export PKG_CONFIG_PATH
10) Still in your ~/.bashrc, add /usr/local/lib to LD_LIBRARY PATH
11) source ~/.bashrc

To test your installation, you can use the Hello World program at the end of this file. Do the following:

1) Copy paste the hello world file to helloworld.cpp.
2) g++ `pkg-config --cflags --libs opencv` helloworld.cpp 
3) ./a.out <path to an image>
